{% extends 'base.html' %}

{% block title %}
    {{ user_page.username }}'s Profile
{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/profile.css') }}">
    {% if logged_in %}
        <script src="{{ url_for('static', filename='JS/profile.js') }}"></script>
    {% endif %}
{% endblock %}

{% block content %}
    <div class="profile-container">
        <div class="profile-content">
            <div class="profile-header">
                <img src="https://pixlok.com/wp-content/uploads/2021/10/User-Profile-Icon-9mces.png">
                <h1>{{ user_page.username }}</h1>
                {% if logged_in %}
                    <div class="edit-button" id="edit-button">Edit profile</div>
                {% endif %}
            </div>
            <div class="info-section" id="bio">
                <h3>Bio</h3>
                {% if user_page.bio is not none %}
                    <p>{{ user_page.bio }}</p>
                    <input type="text" id="bio-input" value="{{ user.bio }}" hidden>
                {% else %}
                    <p>{{ get_init_bio(user_page.created_at) }}</p> 
                    <input type="text" id="bio-input" value="{{ user.bio }}" hidden>
                {% endif %}
            </div>
            <div class="info-section" id="address">
                <h3>Address</h3>
                <p>{{ user_page.address }}</p>
                <input type="text" id="address-input" value="{{ user.address }}" hidden>
            </div>
            <div class="info-section" id="phone">
                <h3>Phone Number</h3>
                <p>{{ user_page.phone }}</p>
                <input type="text" id="phone-input" value="{{ user.phone }}" hidden>
            </div>
        </div>
        <div class="transaction-table">
            <h2>Transaction History</h2>
            <table>
                <tr>
                    <th>Order ID</th>
                    <th>Order Date</th>
                    <th>Quantity</th>
                    <th>Title</th>
                    <th>Total Amount</th>
                </tr>
                {% for order in orders %}
                <tr>
                    <td>{{ order.order_id }}</td>
                    <td>{{ order.order_date }}</td>
                    <td>{{ order.quantity }}</td>
                    <td>{{ order.title }}</td>
                    <td>${{ order.total_amount }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>
    {% if logged_in %}
        <div class="delete-button" onclick="confirmDelete()">Delete Account</div>
    {% endif %}
{% endblock %}
