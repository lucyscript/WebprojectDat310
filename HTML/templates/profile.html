{% extends 'base.html' %}

{% block title %}
    {{ user.username }}'s Profile
{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/profile.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/delete_button.css') }}">
    <script src="{{ url_for('static', filename='JS/delete_button.js') }}"></script>
    <script src="{{ url_for('static', filename='JS/edit_profile.js') }}"></script>
{% endblock %}

{% block content %}
    <div class="profile-container">
        <div class="profile-content">
            <div class="profile-header">
                <img src="https://pixlok.com/wp-content/uploads/2021/10/User-Profile-Icon-9mces.png">
                <h1>{{ user.username }}</h1>
                <p>User ID: {{ user.user_id }}</p>
                <div class="edit-button" id="edit-button">Edit profile</div>
            </div>
            <div class="info-section" id="bio">
                <h3>Bio</h3>
                <p>{{ user.bio }}</p>
                <input type="text" id="bio-input" value="{{ user.bio }}" hidden>
            </div>
            <div class="info-section" id="address">
                <h3>Address</h3>
                <p>{{ user.address }}</p>
                <input type="text" id="address-input" value="{{ user.address }}" hidden>
            </div>
            <div class="info-section" id="phone">
                <h3>Phone Number</h3>
                <p>{{ user.phone }}</p>
                <input type="text" id="phone-input" value="{{ user.phone }}" hidden>
            </div>
        </div>
        <div class="transaction-table">
            <h2>Transaction History</h2>
            <table>
                <tr>
                    <th>Order ID</th>
                    <th>Order Date</th>
                    <th>Quantity</th>
                    <th>Title</th>
                    <th>Total Amount</th>
                </tr>
                {% for order in orders %}
                <tr>
                    <td>{{ order.order_id }}</td>
                    <td>{{ order.order_date }}</td>
                    <td>{{ order.quantity }}</td>
                    <td>{{ order.title }}</td>
                    <td>${{ order.total_amount }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>
    <div class="delete-button" onclick="confirmDelete('{{ user.user_id }}')">Delete Account</div>
{% endblock %}
